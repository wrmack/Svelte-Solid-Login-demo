{"version":3,"file":"login.5bac802b.js","sources":["../../../../src/Use cases/AuthenticateUser/components/ProviderSelector.svelte","../../../../src/Use cases/AuthenticateUser/AuthenticateUser.svelte"],"sourcesContent":["\n<script>\n    import { createEventDispatcher } from 'svelte';\n    import providers from '../../../Models/providers.json';\n    \n    console.log(\"Providers\", providers);\n\tconst dispatch = createEventDispatcher();\n    let displayProv;\n    let text = 'Select ID Provider';\n\n    function toggleDisplayProviders() {\n        const el = document.getElementById('dropdown');\n        // if (displayProv.style.display == 'none') {\n        //     displayProv.style.display = \"block\";\n        //     displayProv.focus();\n        // }\n        // else {\n        //     displayProv.style.display = 'none';\n        //     displayProv.blur();\n        // }\n        if (el.style.display !== 'block') {\n            el.style.display = 'block';\n        }\n        else {\n            el.style.display = 'none';\n        }\n    }\n\n    function handleBlur() {\n        console.log(\"has blur\");\n        displayProv.style.display = \"none\";\n    }\n    \n    function handleFocus() {\n        console.log(\"has focus\");\n    }\n\n    function handleSelectProvider(event) {\n        // let selId =  event.target.attributes.id.value;\n        let selId =  event.currentTarget.id;\n        text = providers[selId].label;\n        dispatch('message',{\n            provider: providers[selId]\n        });\n        displayProv.style.display = 'none';\n    }\n\n</script>\n\n<style>\n    .solid-provider-select {\n        position: relative;\n        box-sizing: border-box;\n        display: block;\n    }\n\n    .logo {\n        width: 40px;\n        margin-left: 10px;\n        vertical-align: middle;\n    }\n\n    .helper {\n        display: inline-block;\n        height: 100%;\n        vertical-align: middle;\n    }\n\n    .providerName {\n        margin-left: 20px;\n    }\n\n    .select-box {\n        -webkit-box-align: center;\n        align-items: center;\n        background-color: rgb(255, 255, 255);\n        border-radius: 4px;\n        border-color: rgb(204, 204, 204);\n        border-style: solid;\n        border-width: 1px;\n        box-sizing: border-box;\n        cursor: default;\n        display: flex;\n        display: -webkit-flex;\n        display: -ms-flexbox;\n        -webkit-flex-direction: column;\n        -ms-flex-direction: column;\n        flex-direction: column;\n        flex-wrap: wrap;\n        -webkit-box-pack: justify;\n        justify-content: space-between;\n        margin: auto;\n        min-height: 38px;\n        min-width: 310px;\n        padding: 0;\n        position: relative;\n        text-align: center;\n        transition-duration: 100ms;\n        transition-timing-function: initial;\n        transition-delay: initial;\n        transition-property: all;\n        box-sizing: border-box;\n        outline-color: initial;\n        outline-style: initial;\n        outline-width: 0px;\n        display: -webkit-box;\n    }\n\n    .select-box:focus {\n        line-height: 18px;\n        outline-color: rgb(0, 103, 244);\n        outline-style: auto;\n        outline-width: 5px;\n    }\n\n    .select-box:hover {\n        border-color: rgb(179, 179, 179);\n    }\n\n    #enter {\n        -webkit-box-align: center;\n        align-items: center;\n        display: flex;\n        flex-grow: 1;\n        flex-shrink: 1;\n        flex-basis: 0%;\n        flex-wrap: wrap;\n        padding: 2px 8px;\n        position: relative;\n        overflow-x: hidden;\n        overflow-y: hidden;\n        box-sizing: border-box;\n    }\n\n    #placeholder-text {\n        color: rgb(127, 127, 127);\n        margin-left: 2px;\n        margin-right: 2px;\n        /* position: absolute;\n        top: 50%;\n        transform: translateY(-50%); */\n        box-sizing: border-box;\n    }\n\n    #arrow-container {\n        -webkit-box-align: center;\n        align-items: center;\n        align-self: stretch;\n        display: flex;\n        flex-shrink: 0;\n        box-sizing: border-box;\n    }\n\n    #divider {\n        align-self: stretch;\n        background-color: rgb(204, 204, 204);\n        margin-bottom: 8px;\n        margin-top: 8px;\n        width: 1px;\n        box-sizing: border-box;\n    }\n\n    .arrow {\n        color: rgb(204, 204, 204);\n        display: flex;\n        padding: 8px;\n        transition-duration: 150ms;\n        transition-timing-function: initial;\n        transition-delay: initial;\n        transition-property: color;\n        box-sizing: border-box;\n        stroke: currentColor;\n        stroke-width: 0;\n        fill: currentColor;\n        line-height: 1px;\n    }\n\n    .arrow:hover {\n        color: rgb(158, 158, 158);\n        fill: currentColor;\n    }\n\n    /* .input-field {\n        box-sizing: content-box; \n        width: 2px; \n        background: 0px center; \n        border: 0px; \n        font-size: inherit; \n        opacity: 1; \n        outline: 0px; \n        padding: 0px; \n        color: inherit;\n    } */\n\n    .provider-list {\n        box-sizing: border-box;\n        background-color: white;\n        display: none;\n        position: absolute;\n        top: 45px;\n        left: 10px;\n        width: 85%;\n        border-width: 1px;\n        border-color: rgb(204, 204, 204);\n        border-style: solid;\n        border-radius: 4px;\n        box-shadow: 0px 0px 10px 1px #bbb5;\n        z-index: 10;\n    }\n\n    .provider-list:focus {\n        outline-style: none;\n    }\n\n    .option {\n        text-align: left;\n        height: 50px;\n    }\n\n    .option:last-child {\n        border-top: 1px solid rgb(204, 204, 204);\n    }\n\n    .option:hover {\n        background-color: rgb(232, 232, 255);\n    }\n\n</style>\n\n<div class=\"solid-provider-select\">\n    <div class=\"select-box\">\n        <div id=\"enter\">\n            <div id=\"placeholder-text\">{text}</div>\n        </div> \n        <div id=\"arrow-container\">\n            <span id=\"divider\"></span>\n            <div class=\"arrow\" on:click={toggleDisplayProviders} aria-hidden=\"true\" >\n                <svg height=\"20\" width=\"20\" viewBox=\"0 0 20 20\" aria-hidden=\"true\" focusable=\"false\" >\n                    <path d=\"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z\"></path>\n                </svg>\n            </div>\n        </div>\n    </div>\n    <div class=\"provider-list\" id='dropdown' bind:this={displayProv} on:blur={handleBlur} on:focus={handleFocus} tabindex=\"0\"  >\n        <div class=\"option\" id=\"0\" on:click={handleSelectProvider}>\n            <span class=\"helper\"></span><img class='logo' src={providers[0].image} alt='first provider' /> <span class='providerName'>{providers[0].label}</span>\n        </div>\n        <div class=\"option\" id=\"1\" on:click={handleSelectProvider}>\n            <span class=\"helper\"></span><img class='logo' src={providers[1].image} alt='second provider' /> <span class='providerName'>{providers[1].label}</span>\n        </div>\n    </div>\n</div>\n\n<!--\nVertically aligning images:\nhttps://stackoverflow.com/questions/7273338/how-to-vertically-align-an-image-inside-a-div\n-->\n","<script>\n\timport GradientBackground from '../../components/GradientBackground.svelte';\n\timport LoginPanel from './components/LoginPanel.svelte';\n\timport ProviderSelector from './components/ProviderSelector.svelte';\n\timport {onMount} from 'svelte';\n\t\n    let auth;\n\tlet useSelectionProvider = false;\n    let selectedProvider = {};\n    let providerWebidText = \"Log In with Provider\";\n\n\tonMount(async () => {\n\t\tauth = window.solid.auth;\n\t\tconsole.log(\"auth2\", auth);\n\t});\n\n\tfunction toggleSelectionProvider() {\n        useSelectionProvider = useSelectionProvider ? false : true;\n        providerWebidText = useSelectionProvider ? \"Log In with WebID\" : \"Log In with Provider\";\n\t}\n\n\tfunction handleProviderSelected(event) {\n\t\tconsole.log(\"Selected provider is:\", event.detail.provider);\n\t\tselectedProvider = event.detail.provider;\n\t}\n\n\tasync function handleFormSubmit() {\n\t\tconst providerUrl = selectedProvider.value;\n\t\tawait auth.trackSession(session => {\n\t\t\tif (!session) {\n\t\t\t\tconsole.log('The user is not logged in');\n\t\t\t\tconst uri = window.location.origin;\n\t\t\t\tauth.login(providerUrl, {callbackUri: uri});\n\t\t\t}\n\t\t\telse {\n                console.log(`The user is ${session.webId}`)\n\t\t\t\twindow.location = \"/\";\n\t\t\t}\n\t\t})\n\t}\n</script>\n\n\n<style>\n\tinput {\n\t\twidth: 100%;\n\t}\n\n\t.welcome {\n\t\twidth: 100%;\n\t\ttext-align: center;\n\t}\n\n\t.welcome h2 {\n\t\tcolor: white;\n\t\tfont-family: 'Raleway', sans-serif;\n\t\tfont-size: 40px;\n\t\tfont-weight: 500;\n\t\tmargin: 0 0 40px 0;\n\t}\n\n\n\t.panel-body {\n\t\tdisplay: grid;\n  \t\tflex-direction: column;\n\t\tfilter:opacity(100%)\n\t}\n\n\t.panel-title {\n\t\tcolor: #656e75;\n\t\tfont-family: 'Raleway', sans-serif;\n\t\tfont-size: 16px;\n\t\tfont-weight: 500;\n\t\tletter-spacing: 1.2px;\n\t\tline-height: 19px;\n\t\ttext-align: center;\n\t\tposition: relative;\n\t\tmargin: 30px 0;\n\t\tdisplay: inline-block;\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tpadding: 0;\n\t}\n\n\t.panel-title::before {\n\t\twidth: 32%;\n\t\tcontent: \"\";\n\t\tbackground: #656e75;\n\t\theight: 1px;\n\t\tbox-sizing: border-box;\n\t\ttop: 50%;\n\t}\n\t.panel-title::after {\n\t\twidth: 32%;\n\t\tcontent: \"\";\n\t\tbackground: #656e75;\n\t\theight: 1px;\n\t\tbox-sizing: border-box;\n\t\ttop: 50%;\n    }\n  \n\tbutton.link {\n\t\tbackground: none;\n\t\tborder: none;\n\t\tcolor: #449DF5;\n\t\tmargin: 20px auto;\n\t\tpadding: 0;\n\t}\n\tbutton.login {\n\t\tborder: none;\n\t\tpadding: 10px 30px;\n\t\tmargin: 20px auto;\n\t\tdisplay: block;\n\t\tbackground-color: #babbbb;\n\t\t-webkit-appearance: none; \n    }\n  \n\tspan {\n\t\tpadding: 0 5px;\n\t}\n\tspan::before {\n\t\tright: 0;\n\t}\n\tspan::after {\n\t\tleft: 0;\n\t}\n</style>\n\n<svelte:head>\n\t<title>Login</title>\n</svelte:head>\n\n<GradientBackground>\n\t<div class='welcome'><h2>Hi! Welcome to Solid</h2></div>\n\t<LoginPanel>\n\t\t<div class='panel-body'>\n\t\t\t<div>\n\t\t\t\t<a class=\"ids-link-filled ids-link-filled--primary\" href=\"/register\">Register for a solid identity</a>\n\t\t\t\t<a href=\"https://solid.inrupt.com/get-a-solid-pod\" rel=\"noopener noreferrer\" target=\"_blank\" class=\"link\">What is a Solid Identity?</a>\n\t\t\t\t<span class='panel-title'><span>Log in</span></span>\n\t\t\t\t<div class=\"solid-provider-login-component\">\n\t\t\t\t\t<form on:submit|preventDefault=\"{handleFormSubmit}\">\n\t\t\t\t\t{#if useSelectionProvider}\n\t\t\t\t\t\t<ProviderSelector on:message={handleProviderSelected}></ProviderSelector>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<input type=\"text\" name=\"idp\" placeholder=\"WebID\">\n\t\t\t\t\t{/if}\n\t\t\t\t\t\t<button type=\"button\" class=\"link\" on:click={toggleSelectionProvider} >{providerWebidText}</button>\n\t\t\t\t\t\t<button type=\"submit\" class=\"login\" >Log In</button>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</LoginPanel>\n</GradientBackground>\n\n<!--\nSee https://github.com/inrupt/solid-react-components/blob/master/src/lib/components/ProviderLogin/children/Form/form.presentational.js\n\n-->"],"names":["providers","label","text","image","toggleDisplayProviders","handleSelectProvider","handleBlur","handleFocus","el","document","getElementById","style","display","console","log","displayProv","dispatch","createEventDispatcher","event","selId","currentTarget","id","provider","handleProviderSelected","useSelectionProvider","providerWebidText","toggleSelectionProvider","handleFormSubmit","auth","selectedProvider","providerUrl","value","trackSession","session","webId","window","location","uri","origin","login","callbackUri","onMount","solid","detail"],"mappings":"wnDAqPuIA,EAAU,GAAGC,QAGZD,EAAU,GAAGC,4EAhB7GC,4ZAAAA,ovDAauBF,EAAU,GAAGG,gMAGbH,EAAU,GAAGG,iQAZnCC,iBAQIC,oCAGAA,mCAJiCC,wBAAsBC,gSAX5DL,4HA9NpC,SAASE,QACCI,EAAKC,SAASC,eAAe,YASV,UAArBF,EAAGG,MAAMC,QACTJ,EAAGG,MAAMC,QAAU,QAGnBJ,EAAGG,MAAMC,QAAU,OAS3B,SAASL,IACLM,QAAQC,IAAI,+BA7BhBD,QAAQC,IAAI,YAAad,OAErBe,EADDC,EAAWC,IAEVf,EAAO,uEAqBPW,QAAQC,IAAI,YACZC,EAAYJ,MAAMC,QAAU,yDAOFM,OAEtBC,EAASD,EAAME,cAAcC,YACjCnB,EAAOF,EAAUmB,GAAOlB,OACxBe,EAAS,UAAU,CACfM,SAAUtB,EAAUmB,KAExBJ,EAAYJ,MAAMC,QAAU,ikBCqGAW,qVAD1BC,iSAKoEC,+qBAAAA,+pBAA3BC,0CANbC,2XAMwCF,k5CA/ItEG,EACHJ,GAAuB,EACpBK,EAAmB,GACnBJ,EAAoB,sDAiB3B,wFACOK,EAAcD,EAAiBE,eAC/BH,EAAKI,aAAa,SAAAC,MAClBA,EAMQpB,QAAQC,0BAAmBmB,EAAQC,QAC/CC,OAAOC,SAAW,QAPL,CACbvB,QAAQC,IAAI,iCACNuB,EAAMF,OAAOC,SAASE,OAC5BV,EAAKW,MAAMT,EAAa,CAACU,YAAaH,8EArBzCI,WAAQ,2EACPb,EAAOO,OAAOO,MAAMd,KACpBf,QAAQC,IAAI,QAASc,qJAIfJ,GAAuBA,yBACvBC,EAAoBD,EAAuB,oBAAsB,yDAGxCN,GAC/BL,QAAQC,IAAI,wBAAyBI,EAAMyB,OAAOrB,UAClDO,EAAmBX,EAAMyB,OAAOrB"}